<%@page import="java.sql.Statement"%>
<%@page import="java.sql.DriverManager"%>
<%@page import="java.sql.ResultSet"%>
<%@page import="java.sql.PreparedStatement"%>
<%@page import="java.sql.Connection"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	<!--
		앞에서 전달한 파라미터 값을 가져와서 화면에 출력
	  -->
	  <%
	  String id=request.getParameter("id");
	  String pwd=request.getParameter("pwd");
	  %>
	  <h1>
	  ID :<%=id %>
	  </h1>
	  <h1>
	  PWD :<%=pwd %>
	  </h1>
	  
	  <%
	  // 1. 환경변수
	  	String driver = "oracle.jdbc.driver.OracleDriver";
		String url ="jdbc:oracle:thin:@localhost:1521:xe";
		String username = "scott";
		String password = "tiger";
		Connection conn = null;
		PreparedStatement pstmt = null;
		ResultSet rs = null;
		
	  // 2. 드라이버로딩
	  Class.forName(driver);
	  
	  // 3. Connection
	  conn = DriverManager.getConnection(url,username,password);
	  // 4. sql문장
	  StringBuffer sb = new StringBuffer();
	  sb.append("SELECT id, pw, name FROM member WHERE id = '"+ id+"' and pw = '"+pwd+"'");
	  //작성한 sql문을 한번 출력
	  System.out.println("SQL : "+sb.toString());
	  // 5. sql문장 객체
	  Statement stmt = conn.createStatement();
	  // 6. 실행
	  rs = stmt.executeQuery("name");
	  // 7. 레코드별 로직 처리
	  rs.next();
	  String name =rs.getString("name");
	  // 8. 자원반납
	  out.println("name : "+ name);
	  
	  %>
	  
	  

</body>
</html>